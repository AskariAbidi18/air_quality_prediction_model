<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lucknow Air Quality Predictor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
  :root {
    --text-primary: #F5F7FA;
    --text-secondary: rgba(245, 247, 250, 0.85);
    --text-muted: rgba(245, 247, 250, 0.7);
    --text-dark: #1F2933;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  h1, h2, h3 {
    color: var(--text-primary);
    text-shadow: 0 3px 25px rgba(0, 0, 0, 0.6), 0 0 40px rgba(0, 0, 0, 0.3);
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  /* Sky Background with Clouds */
  .sky {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    transition: background 2s ease;
    background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%);
  }

  /* Dynamic sky colors based on AQI */
  .sky.aqi-good {
    background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 50%, #B8E6F5 100%);
  }

  .sky.aqi-moderate {
    background: linear-gradient(to bottom, #FDB462 0%, #FFD89B 50%, #FFF4E0 100%);
  }

  .sky.aqi-unhealthy {
    background: linear-gradient(to bottom, #FF6B6B 0%, #FFA07A 50%, #FFE5E5 100%);
  }

  .sky.aqi-very-unhealthy {
    background: linear-gradient(to bottom, #8B0000 0%, #CD5C5C 50%, #F08080 100%);
  }

  .sky.aqi-hazardous {
    background: linear-gradient(to bottom, #4A0E4E 0%, #6B1F70 50%, #8B3A8B 100%);
  }

  /* Animated Clouds */
  .cloud {
    position: absolute;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 100px;
    opacity: 0.7;
    transition: all 2s ease;
  }

  .cloud::before, .cloud::after {
    content: '';
    position: absolute;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 100px;
  }

  .cloud1 {
    width: 100px;
    height: 40px;
    top: 10%;
    left: 10%;
    animation: float1 30s infinite ease-in-out;
  }

  .cloud1::before {
    width: 50px;
    height: 50px;
    top: -25px;
    left: 10px;
  }

  .cloud1::after {
    width: 60px;
    height: 40px;
    top: -15px;
    right: 10px;
  }

  .cloud2 {
    width: 120px;
    height: 50px;
    top: 20%;
    right: 15%;
    animation: float2 35s infinite ease-in-out;
  }

  .cloud2::before {
    width: 60px;
    height: 60px;
    top: -30px;
    left: 15px;
  }

  .cloud2::after {
    width: 70px;
    height: 50px;
    top: -20px;
    right: 15px;
  }

  .cloud3 {
    width: 80px;
    height: 35px;
    top: 50%;
    left: 20%;
    animation: float3 40s infinite ease-in-out;
  }

  .cloud3::before {
    width: 45px;
    height: 45px;
    top: -20px;
    left: 10px;
  }

  .cloud3::after {
    width: 50px;
    height: 35px;
    top: -12px;
    right: 10px;
  }

  .cloud4 {
    width: 110px;
    height: 45px;
    bottom: 20%;
    right: 25%;
    animation: float4 38s infinite ease-in-out;
  }

  .cloud4::before {
    width: 55px;
    height: 55px;
    top: -28px;
    left: 12px;
  }

  .cloud4::after {
    width: 65px;
    height: 45px;
    top: -18px;
    right: 12px;
  }

  /* Cloud color changes based on pollution */
  .sky.aqi-moderate .cloud,
  .sky.aqi-moderate .cloud::before,
  .sky.aqi-moderate .cloud::after {
    background: rgba(255, 255, 255, 0.6);
    opacity: 0.8;
  }

  .sky.aqi-unhealthy .cloud,
  .sky.aqi-unhealthy .cloud::before,
  .sky.aqi-unhealthy .cloud::after {
    background: rgba(200, 200, 200, 0.7);
    opacity: 0.9;
  }

  .sky.aqi-very-unhealthy .cloud,
  .sky.aqi-very-unhealthy .cloud::before,
  .sky.aqi-very-unhealthy .cloud::after {
    background: rgba(150, 150, 150, 0.8);
    opacity: 0.95;
  }

  .sky.aqi-hazardous .cloud,
  .sky.aqi-hazardous .cloud::before,
  .sky.aqi-hazardous .cloud::after {
    background: rgba(100, 100, 100, 0.9);
    opacity: 1;
  }

  @keyframes float1 {
    0%, 100% { transform: translateX(0px) translateY(0px); }
    50% { transform: translateX(100px) translateY(-20px); }
  }

  @keyframes float2 {
    0%, 100% { transform: translateX(0px) translateY(0px); }
    50% { transform: translateX(-80px) translateY(15px); }
  }

  @keyframes float3 {
    0%, 100% { transform: translateX(0px) translateY(0px); }
    50% { transform: translateX(60px) translateY(25px); }
  }

  @keyframes float4 {
    0%, 100% { transform: translateX(0px) translateY(0px); }
    50% { transform: translateX(-70px) translateY(-15px); }
  }

  /* Particle pollution effect */
  .particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
    pointer-events: none;
  }

  .particle {
    position: absolute;
    border-radius: 50%;
    animation: particleFall 10s infinite linear;
    opacity: 0;
  }

  @keyframes particleFall {
    0% { transform: translateY(-10px); opacity: 0; }
    10% { opacity: 0.6; }
    90% { opacity: 0.6; }
    100% { transform: translateY(100vh); opacity: 0; }
  }

  /* Smog overlay for polluted conditions */
  .smog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
    opacity: 0;
    transition: opacity 2s ease;
    background: radial-gradient(circle at 50% 50%, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
  }

  .smog-overlay.active {
    opacity: 1;
  }

  /* Flying Birds */
  .birds-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
    overflow: hidden;
  }

  .bird {
    position: absolute;
    width: 40px;
    height: 30px;
    opacity: 0.8;
    transition: all 2s ease;
  }

  /* Bird SVG shapes using CSS */
  .bird::before,
  .bird::after {
    content: '';
    position: absolute;
    background: #333;
    transition: all 2s ease;
  }

  .bird::before {
    width: 20px;
    height: 3px;
    border-radius: 2px;
    transform: rotate(-25deg);
    transform-origin: right center;
    animation: flapLeft 0.5s ease-in-out infinite;
  }

  .bird::after {
    width: 20px;
    height: 3px;
    border-radius: 2px;
    right: 0;
    transform: rotate(25deg);
    transform-origin: left center;
    animation: flapRight 0.5s ease-in-out infinite;
  }

  /* Bird colors change with pollution */
  .sky.aqi-good .bird::before,
  .sky.aqi-good .bird::after {
    background: #2C3E50;
  }

  .sky.aqi-moderate .bird::before,
  .sky.aqi-moderate .bird::after {
    background: #5D4E37;
    opacity: 0.7;
  }

  .sky.aqi-unhealthy .bird::before,
  .sky.aqi-unhealthy .bird::after {
    background: #666;
    opacity: 0.5;
  }

  .sky.aqi-very-unhealthy .bird::before,
  .sky.aqi-very-unhealthy .bird::after {
    background: #888;
    opacity: 0.3;
  }

  .sky.aqi-hazardous .bird::before,
  .sky.aqi-hazardous .bird::after {
    background: #999;
    opacity: 0.15;
  }

  /* Individual bird paths */
  .bird1 {
    top: 15%;
    left: -50px;
    animation: flyPath1 25s linear infinite;
  }

  .bird2 {
    top: 25%;
    left: -50px;
    animation: flyPath2 30s linear infinite 3s;
  }

  .bird3 {
    top: 35%;
    left: -50px;
    animation: flyPath3 28s linear infinite 6s;
  }

  .bird4 {
    top: 20%;
    left: -50px;
    animation: flyPath4 32s linear infinite 9s;
  }

  .bird5 {
    top: 40%;
    left: -50px;
    animation: flyPath5 27s linear infinite 12s;
  }

  .bird6 {
    top: 30%;
    left: -50px;
    animation: flyPath6 29s linear infinite 15s;
  }

  /* Bird flight paths - birds fly slower when pollution is worse */
  @keyframes flyPath1 {
    0% { transform: translateX(0) translateY(0); }
    50% { transform: translateX(50vw) translateY(-30px); }
    100% { transform: translateX(100vw) translateY(-10px); }
  }

  @keyframes flyPath2 {
    0% { transform: translateX(0) translateY(0); }
    50% { transform: translateX(50vw) translateY(20px); }
    100% { transform: translateX(100vw) translateY(-5px); }
  }

  @keyframes flyPath3 {
    0% { transform: translateX(0) translateY(0); }
    50% { transform: translateX(50vw) translateY(-15px); }
    100% { transform: translateX(100vw) translateY(15px); }
  }

  @keyframes flyPath4 {
    0% { transform: translateX(0) translateY(0); }
    50% { transform: translateX(50vw) translateY(25px); }
    100% { transform: translateX(100vw) translateY(-20px); }
  }

  @keyframes flyPath5 {
    0% { transform: translateX(0) translateY(0); }
    50% { transform: translateX(50vw) translateY(-20px); }
    100% { transform: translateX(100vw) translateY(10px); }
  }

  @keyframes flyPath6 {
    0% { transform: translateX(0) translateY(0); }
    50% { transform: translateX(50vw) translateY(10px); }
    100% { transform: translateX(100vw) translateY(-25px); }
  }

  /* Wing flapping animation */
  @keyframes flapLeft {
    0%, 100% { transform: rotate(-25deg); }
    50% { transform: rotate(-45deg); }
  }

  @keyframes flapRight {
    0%, 100% { transform: rotate(25deg); }
    50% { transform: rotate(45deg); }
  }

  /* Slower bird movement for polluted skies */
  .sky.aqi-moderate .bird1 { animation-duration: 35s; }
  .sky.aqi-moderate .bird2 { animation-duration: 40s; }
  .sky.aqi-moderate .bird3 { animation-duration: 38s; }
  .sky.aqi-moderate .bird4 { animation-duration: 42s; }
  .sky.aqi-moderate .bird5 { animation-duration: 37s; }
  .sky.aqi-moderate .bird6 { animation-duration: 39s; }

  .sky.aqi-unhealthy .bird1 { animation-duration: 45s; }
  .sky.aqi-unhealthy .bird2 { animation-duration: 50s; }
  .sky.aqi-unhealthy .bird3 { animation-duration: 48s; }
  .sky.aqi-unhealthy .bird4 { animation-duration: 52s; }
  .sky.aqi-unhealthy .bird5 { animation-duration: 47s; }
  .sky.aqi-unhealthy .bird6 { animation-duration: 49s; }

  /* Very few birds visible in very unhealthy conditions */
  .sky.aqi-very-unhealthy .bird3,
  .sky.aqi-very-unhealthy .bird4,
  .sky.aqi-very-unhealthy .bird5,
  .sky.aqi-very-unhealthy .bird6 {
    opacity: 0;
  }

  /* Almost no birds in hazardous conditions */
  .sky.aqi-hazardous .bird {
    opacity: 0;
  }

  .container {
    position: relative;
    z-index: 2;
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  /* Hero Section */
  .hero {
    text-align: center;
    padding: 60px 20px;
    margin-bottom: 40px;
  }

  .hero h1 {
    font-size: 3.5rem;
    color: var(--text-primary);
    text-shadow: 0 3px 25px rgba(0, 0, 0, 0.6), 0 0 40px rgba(0, 0, 0, 0.3);
    margin-bottom: 20px;
    font-weight: 700;
    letter-spacing: -1px;
    transition: all 1s ease;
  }

  /* Hero text changes color based on background */
  .sky.aqi-good ~ .container .hero h1,
  .sky.aqi-moderate ~ .container .hero h1 {
    color: #1F2933;
    text-shadow: 0 2px 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 255, 0.5);
  }

  .sky.aqi-unhealthy ~ .container .hero h1,
  .sky.aqi-very-unhealthy ~ .container .hero h1,
  .sky.aqi-hazardous ~ .container .hero h1 {
    color: #FFE5E5;
  }

  .hero p {
    font-size: 1.3rem;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.4);
    max-width: 600px;
    margin: 0 auto 30px;
    transition: all 1s ease;
  }

  .sky.aqi-good ~ .container .hero p,
  .sky.aqi-moderate ~ .container .hero p {
    color: #1F2933;
    text-shadow: 1px 1px 10px rgba(255, 255, 255, 0.8);
  }

  .city-badge {
    display: inline-block;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(15px);
    padding: 12px 30px;
    border-radius: 50px;
    color: white;
    font-size: 1.1rem;
    font-weight: 600;
    border: 2px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    transition: all 1s ease;
  }

  .sky.aqi-good ~ .container .city-badge,
  .sky.aqi-moderate ~ .container .city-badge {
    color: #1F2933;
    background: rgba(255, 255, 255, 0.5);
    border-color: rgba(0, 0, 0, 0.2);
  }

  .sky.aqi-hazardous ~ .container .city-badge {
    background: rgba(139, 0, 0, 0.4);
    border-color: rgba(255, 100, 100, 0.6);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 12px 40px rgba(255, 0, 0, 0.4);
    }
  }

  /* Glass Card with dynamic styling */
  .glass-card {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(25px);
    border-radius: 25px;
    padding: 40px;
    margin-bottom: 30px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    transition: all 1s ease;
  }

  .sky.aqi-unhealthy ~ .container .glass-card {
    background: rgba(255, 200, 200, 0.25);
    border-color: rgba(255, 150, 150, 0.4);
  }

  .sky.aqi-very-unhealthy ~ .container .glass-card {
    background: rgba(200, 100, 100, 0.3);
    border-color: rgba(255, 100, 100, 0.5);
  }

  .sky.aqi-hazardous ~ .container .glass-card {
    background: rgba(139, 0, 0, 0.35);
    border-color: rgba(255, 0, 0, 0.6);
    box-shadow: 0 12px 40px rgba(139, 0, 0, 0.3);
  }

  .section-title {
    font-size: 2rem;
    color: white;
    margin-bottom: 30px;
    text-align: center;
    font-weight: 600;
    text-shadow: 2px 2px 20px rgba(0, 0, 0, 0.4);
  }

  .sky.aqi-good ~ .container .section-title,
  .sky.aqi-moderate ~ .container .section-title {
    color: #1F2933;
    text-shadow: 1px 1px 10px rgba(255, 255, 255, 0.8);
  }

  /* Input Grid */
  .input-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }

  .input-group {
    display: flex;
    flex-direction: column;
  }

  .input-group label {
    color: white;
    font-size: 0.95rem;
    margin-bottom: 8px;
    font-weight: 600;
    text-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);
  }

  .sky.aqi-good ~ .container .input-group label,
  .sky.aqi-moderate ~ .container .input-group label {
    color: #1F2933;
    text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);
  }

  .input-group input,
  .input-group select {
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid transparent;
    border-radius: 12px;
    padding: 14px 16px;
    font-size: 1rem;
    transition: all 0.3s ease;
    outline: none;
  }

  .input-group input:focus,
  .input-group select:focus {
    border-color: white;
    box-shadow: 0 0 25px rgba(255, 255, 255, 0.4);
    transform: translateY(-2px);
    background: white;
  }

  .input-hint {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.8);
    margin-top: 5px;
    text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
  }

  .sky.aqi-good ~ .container .input-hint,
  .sky.aqi-moderate ~ .container .input-hint {
    color: rgba(31, 41, 51, 0.7);
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
  }

  /* Buttons */
  .btn {
    background: white;
    color: #4A90E2;
    border: none;
    border-radius: 15px;
    padding: 16px 45px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.4s ease;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
    display: inline-block;
  }

  .btn:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.35);
  }

  .btn:active {
    transform: translateY(-1px);
  }

  .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }

  .btn-secondary {
    background: rgba(255, 255, 255, 0.25);
    color: white;
    border: 2px solid white;
    backdrop-filter: blur(10px);
  }

  .sky.aqi-good ~ .container .btn-secondary,
  .sky.aqi-moderate ~ .container .btn-secondary {
    color: #1F2933;
    border-color: #1F2933;
  }

  .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.35);
  }

  .button-group {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
  }

  /* Results Card */
  .results-card {
    background: rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(30px);
    border-radius: 25px;
    padding: 45px;
    margin-top: 30px;
    border: 3px solid rgba(255, 255, 255, 0.4);
    display: none;
    animation: slideIn 0.6s ease;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
    transition: all 1s ease;
  }

  .results-card.show {
    display: block;
  }

  .sky.aqi-hazardous ~ .container .results-card {
    background: rgba(139, 0, 0, 0.4);
    border-color: rgba(255, 50, 50, 0.6);
    animation: slideIn 0.6s ease, warningPulse 3s infinite;
  }

  @keyframes warningPulse {
    0%, 100% { box-shadow: 0 15px 50px rgba(139, 0, 0, 0.3); }
    50% { box-shadow: 0 20px 60px rgba(255, 0, 0, 0.5); }
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(40px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .prediction-value {
    font-size: 5rem;
    color: white;
    text-align: center;
    font-weight: 800;
    text-shadow: 3px 3px 25px rgba(0, 0, 0, 0.4);
    margin-bottom: 15px;
    letter-spacing: -2px;
  }

  .sky.aqi-good ~ .container .prediction-value,
  .sky.aqi-moderate ~ .container .prediction-value {
    color: #1F2933;
    text-shadow: 2px 2px 15px rgba(255, 255, 255, 0.8);
  }

  .prediction-label {
    text-align: center;
    font-size: 1.3rem;
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: 25px;
    font-weight: 500;
  }

  .sky.aqi-good ~ .container .prediction-label,
  .sky.aqi-moderate ~ .container .prediction-label {
    color: #1F2933;
    text-shadow: 1px 1px 8px rgba(255, 255, 255, 0.6);
  }

  .aqi-status {
    text-align: center;
    font-size: 2rem;
    color: white;
    font-weight: 700;
    padding: 20px;
    border-radius: 15px;
    background: rgba(0, 0, 0, 0.25);
    margin-bottom: 25px;
    text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.3);
  }

  .sky.aqi-good ~ .container .aqi-status,
  .sky.aqi-moderate ~ .container .aqi-status {
    color: #1F2933;
    background: rgba(255, 255, 255, 0.4);
    text-shadow: 1px 1px 10px rgba(255, 255, 255, 0.8);
  }

  /* AI Insights */
  .insights-card {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 18px;
    padding: 30px;
    margin-top: 25px;
    display: none;
    animation: slideIn 0.6s ease;
    border: 2px solid rgba(255, 255, 255, 0.2);
  }

  .insights-card.show {
    display: block;
  }

  .insights-text {
    color: white;
    line-height: 1.9;
    font-size: 1.05rem;
    text-shadow: 1px 1px 10px rgba(0, 0, 0, 0.4);
  }

  /* Loading Spinner */
  .spinner {
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-top: 4px solid white;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    margin: 25px auto;
    display: none;
  }

  .sky.aqi-good ~ .container .spinner,
  .sky.aqi-moderate ~ .container .spinner {
    border-color: rgba(31, 41, 51, 0.3);
    border-top-color: #1F2933;
  }

  .spinner.show {
    display: block;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Metrics Section */
  .metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 25px;
    margin-bottom: 35px;
  }

  .metric-card {
    background: rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(25px);
    border-radius: 18px;
    padding: 30px;
    text-align: center;
    border: 2px solid rgba(255, 255, 255, 0.4);
    transition: all 0.4s ease;
  }

  .metric-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
  }

  .metric-value {
    font-size: 3rem;
    color: white;
    font-weight: 800;
    margin-bottom: 12px;
    text-shadow: 2px 2px 20px rgba(0, 0, 0, 0.3);
  }

  .sky.aqi-good ~ .container .metric-value,
  .sky.aqi-moderate ~ .container .metric-value {
    color: #1F2933;
    text-shadow: 1px 1px 10px rgba(255, 255, 255, 0.6);
  }

  .metric-label {
    color: rgba(255, 255, 255, 0.95);
    font-size: 1.1rem;
    font-weight: 600;
    text-shadow: 1px 1px 10px rgba(0, 0, 0, 0.2);
  }

  .sky.aqi-good ~ .container .metric-label,
  .sky.aqi-moderate ~ .container .metric-label {
    color: #1F2933;
    text-shadow: 0 1px 3px rgba(255, 255, 255, 0.5);
  }

  /* Chart Container */
  .chart-container {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 35px;
    margin-top: 25px;
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.15);
  }

  .chart-title {
    font-size: 1.5rem;
    color: #333;
    margin-bottom: 25px;
    text-align: center;
    font-weight: 700;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .hero h1 {
      font-size: 2.5rem;
    }
    .hero p {
      font-size: 1.1rem;
    }
    .glass-card {
      padding: 25px;
    }
    .prediction-value {
      font-size: 3.5rem;
    }
  }
</style>
  </head>
  <body>
    <!-- Sky with Clouds -->
    <div class="sky" id="sky">
      <div class="cloud cloud1"></div>
      <div class="cloud cloud2"></div>
      <div class="cloud cloud3"></div>
      <div class="cloud cloud4"></div>
    </div>

    <div class="birds-container">
        <div class="bird bird1"></div>
        <div class="bird bird2"></div>
        <div class="bird bird3"></div>
        <div class="bird bird4"></div>
        <div class="bird bird5"></div>
        <div class="bird bird6"></div>
      </div>
    </div>

    <!-- Particle System -->
    <div class="particles" id="particles"></div>

    <!-- Smog Overlay for bad pollution -->
    <div class="smog-overlay" id="smogOverlay"></div>

    <div class="container">
      <!-- Hero Section -->
      <div class="hero">
        <h1>üå¨Ô∏è Air Quality Predictor</h1>
        <p>
          ML-powered PM2.5 prediction with AI-driven insights for cleaner air
        </p>
        <div class="city-badge">üìç Lucknow, India</div>
      </div>

      <!-- Prediction Section -->
      <div class="glass-card">
        <h2 class="section-title">Enter Pollutant Levels</h2>

        <div class="input-grid">
          <div class="input-group">
            <label>PM10 (Œºg/m¬≥)</label>
            <input
              type="number"
              id="pm10"
              step="0.1"
              placeholder="e.g., 150.5"
            />
            <span class="input-hint">Threshold: 100 Œºg/m¬≥</span>
          </div>

          <div class="input-group">
            <label>NO‚ÇÇ (Œºg/m¬≥)</label>
            <input type="number" id="no2" step="0.1" placeholder="e.g., 65.2" />
            <span class="input-hint">Threshold: 80 Œºg/m¬≥</span>
          </div>

          <div class="input-group">
            <label>SO‚ÇÇ (Œºg/m¬≥)</label>
            <input type="number" id="so2" step="0.1" placeholder="e.g., 45.8" />
            <span class="input-hint">Threshold: 80 Œºg/m¬≥</span>
          </div>

          <div class="input-group">
            <label>CO (mg/m¬≥)</label>
            <input type="number" id="co" step="0.01" placeholder="e.g., 1.5" />
            <span class="input-hint">Threshold: 2 mg/m¬≥</span>
          </div>

          <div class="input-group">
            <label>Ozone (Œºg/m¬≥)</label>
            <input
              type="number"
              id="ozone"
              step="0.1"
              placeholder="e.g., 85.3"
            />
            <span class="input-hint">Threshold: 100 Œºg/m¬≥</span>
          </div>

          <div class="input-group">
            <label>Month</label>
            <select id="month">
              <option value="">Select month</option>
              <option value="1">January</option>
              <option value="2">February</option>
              <option value="3">March</option>
              <option value="4">April</option>
              <option value="5">May</option>
              <option value="6">June</option>
              <option value="7">July</option>
              <option value="8">August</option>
              <option value="9">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
            <span class="input-hint">Seasonal patterns matter</span>
          </div>
        </div>

        <div class="button-group">
          <button class="btn" onclick="predictPM25()">Predict PM2.5</button>
        </div>

        <div class="spinner" id="predictionSpinner"></div>

        <!-- Results Card -->
        <div class="results-card" id="resultsCard">
          <div class="prediction-value" id="predictionValue">--</div>
          <div class="prediction-label">PM2.5 (Œºg/m¬≥)</div>
          <div class="aqi-status" id="aqiStatus">--</div>

          <div class="button-group">
            <button class="btn btn-secondary" onclick="getInsights()">
              ü§ñ Get AI Insights
            </button>
          </div>

          <div class="spinner" id="insightsSpinner"></div>

          <div class="insights-card" id="insightsCard">
            <h3
              style="
                color: white;
                margin-bottom: 18px;
                font-size: 1.4rem;
                font-weight: 700;
              "
            >
              üí° AI Analysis
            </h3>
            <div class="insights-text" id="insightsText"></div>
          </div>
        </div>
      </div>

      <!-- Model Metrics Section -->
      <div class="glass-card">
        <h2 class="section-title">Model Performance Metrics</h2>

        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-value" id="rmseValue">--</div>
            <div class="metric-label">RMSE</div>
          </div>

          <div class="metric-card">
            <div class="metric-value" id="r2Value">--</div>
            <div class="metric-label">R¬≤ Score</div>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart-title">Feature Importance Analysis</div>
          <canvas id="featureChart"></canvas>
        </div>
      </div>
    </div>

    <script>
      // API Base URL - CHANGE THIS TO YOUR FASTAPI SERVER URL
      const API_URL = "http://localhost:8000";

      let currentPrediction = null;
      let currentInputData = null;

      // Create animated particles
      function createParticles() {
        const particlesContainer = document.getElementById("particles");
        for (let i = 0; i < 50; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.left = Math.random() * 100 + "%";
          particle.style.width = Math.random() * 3 + 2 + "px";
          particle.style.height = particle.style.width;
          particle.style.animationDelay = Math.random() * 10 + "s";
          particle.style.animationDuration = Math.random() * 5 + 8 + "s";
          particlesContainer.appendChild(particle);
        }
      }

      // Update particle appearance based on pollution
      // Update particle appearance based on pollution
function updateParticles(pm25) {
  const particles = document.querySelectorAll(".particle");
  particles.forEach((p) => {
    if (pm25 <= 50) {
      p.style.background = "rgba(255, 255, 255, 0.4)";
      p.style.opacity = "0";
    } else if (pm25 <= 100) {
      p.style.background = "rgba(255, 200, 100, 0.5)";
      p.style.opacity = "0.3";
    } else if (pm25 <= 200) {
      p.style.background = "rgba(200, 100, 100, 0.6)";
      p.style.opacity = "0.5";
    } else if (pm25 <= 300) {
      p.style.background = "rgba(150, 50, 50, 0.7)";
      p.style.opacity = "0.7";
    } else {
      p.style.background = "rgba(100, 50, 100, 0.8)";
      p.style.opacity = "0.9";
    }
  });
}

// Change environment based on PM2.5
function changeEnvironment(pm25) {
  const sky = document.getElementById("sky");
  const smog = document.getElementById("smogOverlay");

  sky.className = "sky";
  const aqi = getAQICategory(pm25);
  sky.classList.add(aqi.class);

  // Show smog overlay for unhealthy conditions
  if (pm25 > 100) {
    smog.classList.add("active");
  } else {
    smog.classList.remove("active");
  }

  updateParticles(pm25);
}

      // Get AQI category
      function getAQICategory(pm25) {
        if (pm25 <= 50) {
          return { category: "Good", class: "aqi-good", emoji: "üòä" };
        } else if (pm25 <= 100) {
          return { category: "Moderate", class: "aqi-moderate", emoji: "üòê" };
        } else if (pm25 <= 200) {
          return { category: "Unhealthy", class: "aqi-unhealthy", emoji: "üò∑" };
        } else if (pm25 <= 300) {
          return {
            category: "Very Unhealthy",
            class: "aqi-very-unhealthy",
            emoji: "ü§¢",
          };
        } else {
          return { category: "Hazardous", class: "aqi-hazardous", emoji: "‚ò†Ô∏è" };
        }
      }

      // üîÆ Predict PM2.5
      async function predictPM25() {
        const spinner = document.getElementById("predictionSpinner");
        spinner.classList.add("show");

        const data = {
          "PM10 (ug/m3)": parseFloat(document.getElementById("pm10").value),
          "NO2 (ug/m3)": parseFloat(document.getElementById("no2").value),
          "SO2 (ug/m3)": parseFloat(document.getElementById("so2").value),
          "CO (mg/m3)": parseFloat(document.getElementById("co").value),
          "Ozone (ug/m3)": parseFloat(document.getElementById("ozone").value),
          month: parseInt(document.getElementById("month").value),
        };

        try {
          const res = await fetch(`${API_URL}/predict`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
          });

          const result = await res.json();

          currentPrediction = result.predicted_pm25;
          currentInputData = data;

          document.getElementById("predictionValue").innerText =
            currentPrediction.toFixed(1);

          const aqi = getAQICategory(currentPrediction);
          document.getElementById(
            "aqiStatus"
          ).innerText = `${aqi.emoji} ${aqi.category}`;

          changeEnvironment(currentPrediction);
          document.getElementById("resultsCard").classList.add("show");
        } catch (err) {
          alert("Prediction failed. Check backend connection.");
          console.error(err);
        } finally {
          spinner.classList.remove("show");
        }
      }

      // ü§ñ Get Gemini Insights
      async function getInsights() {
        if (!currentInputData) return;

        const spinner = document.getElementById("insightsSpinner");
        spinner.classList.add("show");

        try {
          const res = await fetch(`${API_URL}/insights`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(currentInputData),
          });

          const result = await res.json();
          document.getElementById("insightsText").innerText = result.insight;
          document.getElementById("insightsCard").classList.add("show");
        } catch (err) {
          document.getElementById("insightsText").innerText =
            "AI insights are temporarily unavailable.";
          document.getElementById("insightsCard").classList.add("show");
          console.error(err);
        } finally {
          spinner.classList.remove("show");
        }
      }

      // üìä Load model evaluation
      async function loadEvaluation() {
        try {
          const res = await fetch(`${API_URL}/evaluation`);
          const data = await res.json();

          document.getElementById("rmseValue").innerText = data.rmse;
          document.getElementById("r2Value").innerText = data.r2_score;

          const ctx = document.getElementById("featureChart").getContext("2d");
          new Chart(ctx, {
            type: "bar",
            data: {
              labels: Object.keys(data.feature_importance),
              datasets: [
                {
                  label: "Feature Importance",
                  data: Object.values(data.feature_importance),
                  backgroundColor: "rgba(0, 255, 255, 0.7)",
                },
              ],
            },
            options: {
              responsive: true,
              scales: {
                y: { beginAtZero: true },
              },
            },
          });
        } catch (err) {
          console.error("Failed to load evaluation data", err);
        }
      }

      // üöÄ Init
      window.onload = () => {
        createParticles();
        loadEvaluation();
      };
    </script>
  </body>
</html>
